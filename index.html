<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ALLYDASH • Public Pledge Wall</title>
<meta name="description" content="A free, forkable pledge wall for male allyship supporting female founders. No backend, no sign-in." />
<style>
:root{--bg:#0b0b0b;--panel:#101010;--panel2:#0e0e0e;--line:#232323;--text:#f5f5f5;--muted:#b9b9b9;--accent:#ffd166;}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 Inter,system-ui,Segoe UI,Arial}
a{color:#b8a0ff;text-decoration:none}
header{border-bottom:1px solid var(--line);background:#0a0a0a;}
.header-wrap{max-width:1080px;margin:0 auto;display:flex;gap:16px;align-items:center;padding:12px 16px}
h1{font-size:20px;margin:0}
.toolbar{max-width:1080px;margin:0 auto;padding:10px 16px;display:flex;gap:10px;flex-wrap:wrap}
.toolbar .stat{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:10px 14px;min-width:160px;text-align:center}
.grid{max-width:1080px;margin:12px auto;display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;padding:0 16px}
@media (max-width:980px){.grid{grid-template-columns:1fr 1fr}}
@media (max-width:640px){.grid{grid-template-columns:1fr}}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:12px}
.card strong{color:#fff}
section.block{max-width:1080px;margin:16px auto;padding:0 16px}
.panel{background:var(--panel2);border:1px dashed var(--line);border-radius:14px;padding:14px}
label{display:block;margin:6px 0 4px;color:var(--muted);font-size:13px}
input, textarea, select, button{width:100%;background:#0a0a0a;border:1px solid var(--line);border-radius:10px;color:var(--text);padding:10px}
textarea{min-height:90px}
button{cursor:pointer}
button.primary{background:var(--accent);border-color:#c9a850;color:#000;font-weight:700}
button.inline{width:auto;padding:8px 12px}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.footer{max-width:1080px;margin:30px auto 60px;color:var(--muted);text-align:center;padding:0 16px}
.badge{display:inline-block;background:#141414;border:1px solid var(--line);border-radius:999px;padding:6px 10px;color:#ddd;font-size:12px;margin:4px 6px 0 0}
.row{display:flex;gap:10px;flex-wrap:wrap}
.grow{flex:1}
small, .hint{color:var(--muted)}
hr{border:0;border-top:1px solid var(--line);margin:12px 0}
.searchbar{display:flex;gap:8px;align-items:center}
.logo{width:220px;height:48px;border-radius:10px;display:inline-block;background:#111;color:#f5f5f5;display:grid;place-items:center;font-weight:700}
</style>
</head>
<body>
<header aria-label="Site header">
  <div class="header-wrap">
    <div class="logo">ALLYDASH • Pledge Wall</div>
    <div>
      <h1>Public Pledge Wall</h1>
      <div class="hint">Male allies backing female founders with visible, trackable actions — free, forkable, no backend.</div>
    </div>
  </div>
</header>

<div class="toolbar" role="region" aria-label="Dashboard stats">
  <div class="stat"><div id="allyCount" style="font-weight:800;font-size:26px">3</div><div>Allies Joined</div></div>
  <div class="stat"><div id="pledgeCount" style="font-weight:800;font-size:26px">3</div><div>Pledges Posted</div></div>
  <div class="stat"><div id="weekActions" style="font-weight:800;font-size:26px">4</div><div>Starter Actions</div></div>
</div>

<section class="block" aria-label="Filters and search">
  <div class="panel">
    <div class="row">
      <div class="grow">
        <label for="search">Search pledges</label>
        <div class="searchbar">
          <input id="search" placeholder="Search by text or name" aria-label="Search pledges">
          <button class="inline" id="clearSearch" aria-label="Clear search">Clear</button>
        </div>
      </div>
      <div>
        <label for="roleFilter">Filter by role</label>
        <select id="roleFilter" aria-label="Filter pledges by role">
          <option value="">All roles</option>
          <option>Student</option>
          <option>Founder</option>
          <option>Investor</option>
          <option>Engineer</option>
          <option>Designer</option>
          <option>Mentor</option>
        </select>
      </div>
      <div>
        <label>&nbsp;</label>
        <button class="inline" id="exportCsv" aria-label="Export pledges as CSV">Export CSV</button>
      </div>
    </div>
  </div>
</section>

<section class="block" aria-label="Pledge wall">
  <div class="grid" id="pledges" role="list">
  </div>
</section>

<section class="block" aria-label="Add a pledge">
  <div class="panel">
    <h2 style="margin:0 0 6px">Add your pledge</h2>
    <div class="hint">Demo-only: adds to the page (no database). Use clear, specific, one-line actions.</div>
    <div class="row">
      <div class="grow">
        <label for="name">Your name (optional)</label>
        <input id="name" placeholder="Name (optional)" autocomplete="name">
      </div>
      <div>
        <label for="role">Role</label>
        <select id="role">
          <option value="">Select</option>
          <option>Student</option>
          <option>Founder</option>
          <option>Investor</option>
          <option>Engineer</option>
          <option>Designer</option>
          <option>Mentor</option>
        </select>
      </div>
    </div>
    <label for="pledge">Your one-line ally action *</label>
    <textarea id="pledge" placeholder="E.g., I will credit women by name in all team recaps." aria-required="true"></textarea>
    <div class="controls">
      <button class="primary" id="submit">Publish pledge</button>
      <button id="reset">Reset</button>
    </div>
    <small>By publishing, you agree to keep this respectful and specific. This demo stores pledges only in the page memory.</small>
  </div>
</section>

<section class="block" aria-label="Impact tracker">
  <div class="panel">
    <h2 style="margin:0 0 6px">Impact Tracker (live)</h2>
    <div class="hint">Live embed from your published Google Sheet.</div>
    <div id="embedHolder" style="aspect-ratio:16/9;background:#0a0a0a;border:1px solid var(--line);border-radius:12px;overflow:hidden;margin-top:8px">
      <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSFaeGFD5VbYHWKILOPxiyFWO_sPM8ruKMhVBmiODtOkHfLra7ZZWSXw1yYdAOJj3kd4xiakTXROrLd/pubhtml" width="100%" height="100%" frameborder="0"></iframe>
    </div>
  </div>
</section>

<section class="block" aria-label="About & Sources">
  <div class="panel">
    <h2 style="margin:0 0 6px">About this project</h2>
    <p class="hint">
      Based on real-world allyship research and guides: UN Women HeForShe Male Allyship Toolkit (2024), The Diversity Project Male Allies Guide (UK), Mattingly (2018),
      and corporate actions from Barclays and HCLTech. This forkable demo is designed for startup ecosystems—pitch rooms, demo days, credits, and warm intros.
    </p>
    <div>
      <span class="badge">Free & forkable</span>
      <span class="badge">No backend</span>
      <span class="badge">Works on any static host</span>
      <span class="badge">CSV export</span>
      <span class="badge">Search & filter</span>
      <span class="badge">Accessible labels</span>
    </div>
  </div>
</section>

<div class="footer" role="contentinfo">
  © 2025 You • Host anywhere (GitHub Pages, Netlify Drop, Glitch) • This demo stores nothing server-side.
</div>

<script>
const starterPledges = [
  {name:"Ravi", role:"Investor", text:"I will review one female-founder pitch every month and make 2 warm intros per quarter."},
  {name:"Michael", role:"Engineer", text:"I will credit women by name in sprint recaps and PRDs."},
  {name:"Sam", role:"Designer", text:"I will bias-check job posts and ensure balanced interview panels next cycle."}
];

const $ = sel => document.querySelector(sel);
const pledgesEl = $("#pledges");
const allyCountEl = $("#allyCount");
const pledgeCountEl = $("#pledgeCount");

let pledges = [...starterPledges];

function renderPledges() {
  const qEl = document.getElementById("search");
  const q = qEl ? qEl.value.toLowerCase().trim() : "";
  const roleEl = document.getElementById("roleFilter");
  const role = roleEl ? roleEl.value : "";
  pledgesEl.innerHTML = "";
  pledges
    .filter(p => (role ? p.role === role : true))
    .filter(p => {
      if(!q) return true;
      return (p.name||"").toLowerCase().includes(q) || p.text.toLowerCase().includes(q) || (p.role||"").toLowerCase().includes(q);
    })
    .forEach((p)=>{
      const card = document.createElement("article");
      card.className = "card";
      card.setAttribute("role","listitem");
      const who = p.role ? `${p.name||"Anonymous"} (${p.role})` : (p.name||"Anonymous");
      card.innerHTML = `<strong>${who}</strong><br>${p.text}`;
      pledgesEl.appendChild(card);
    });
  allyCountEl.textContent = pledges.length;
  pledgeCountEl.textContent = pledges.length;
}
renderPledges();

const submitBtn = document.getElementById("submit");
if(submitBtn){
  submitBtn.addEventListener("click", ()=>{
    const nameEl = document.getElementById("name");
    const roleEl = document.getElementById("role");
    const pledgeEl = document.getElementById("pledge");
    const name = nameEl ? nameEl.value.trim() : "";
    const role = roleEl ? roleEl.value : "";
    const text = pledgeEl ? pledgeEl.value.trim() : "";
    if(!text) { alert("Please enter a clear, one-line pledge."); return; }
    pledges.unshift({name, role, text});
    if(pledgeEl) pledgeEl.value = "";
    if(nameEl) nameEl.value = "";
    if(roleEl) roleEl.value = "";
    renderPledges();
    window.scrollTo({top:0, behavior:"smooth"});
  });
}

const resetBtn = document.getElementById("reset");
if(resetBtn){
  resetBtn.addEventListener("click", ()=>{
    const pledgeEl = document.getElementById("pledge");
    const nameEl = document.getElementById("name");
    const roleEl = document.getElementById("role");
    if(pledgeEl) pledgeEl.value="";
    if(nameEl) nameEl.value="";
    if(roleEl) roleEl.value="";
  });
}

const searchEl = document.getElementById("search");
if(searchEl) searchEl.addEventListener("input", renderPledges);
const roleFilterEl = document.getElementById("roleFilter");
if(roleFilterEl) roleFilterEl.addEventListener("change", renderPledges);
const clearBtn = document.getElementById("clearSearch");
if(clearBtn) clearBtn.addEventListener("click", ()=>{ const s=document.getElementById("search"); if(s) s.value=""; renderPledges(); });

// CSV export (client-side)
const exportBtn = document.getElementById("exportCsv");
if(exportBtn){
  exportBtn.addEventListener("click", ()=>{
    const rows = [["name","role","pledge"]].concat(pledges.map(p=>[p.name||"", p.role||"", p.text.replace(/\n/g," ")]));
    const csv = rows.map(r=>r.map(x=>`"{(x||"").replace(/"/g,'""')}"`).join(",")).join("\n");
    const blob = new Blob([csv], {type:"text/csv;charset=utf-8"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "pledges.csv";
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });
}
</script>
</body>
</html>
